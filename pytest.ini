[pytest]
# Pytest Configuration
# ====================

# Django settings module for tests
DJANGO_SETTINGS_MODULE = NotMoodle.settings_test

# Python files to search for tests
python_files = test_*.py *_test.py tests.py

# Python classes to search for tests
python_classes = Test* *Test *TestCase

# Python functions to search for tests
python_functions = test_*

# Test discovery paths
testpaths = tests NotMoodle

# Additional command-line options
addopts =
    # Coverage options
    --cov=NotMoodle
    --cov-branch
    --cov-report=term-missing:skip-covered
    --cov-report=html
    --cov-report=xml:coverage.xml
    
    # JUnit XML for CI/CD
    --junitxml=report.xml
    
    # Verbose output
    --verbose
    --tb=short
    
    # Show local variables in tracebacks
    --showlocals
    
    # Strict markers (fail on unknown markers)
    --strict-markers
    
    # Disable warnings summary for cleaner output
    -p no:warnings
    
    # Reuse database between tests for speed
    --reuse-db
    
    # Fail on first error (optional, comment out for full test run)
    # --exitfirst
    # -x

# Markers for organizing tests
markers =
    unit: Unit tests (isolated, fast)
    integration: Integration tests (may touch database)
    api: API endpoint tests
    slow: Slow tests (e.g., with time.sleep or external calls)
    skip_ci: Skip in CI/CD pipeline

# Minimum Python version
minversion = 3.10

